(()=>{"use strict";function e(){let e=null,t=null,l=null,r=null;const n=document.querySelectorAll(".list");for(const s of n)s.addEventListener("mousedown",(n=>{n.preventDefault(),n.target.classList.contains("list__item")&&(e=n.target,t=n.target.cloneNode(!0),t.classList.add("dragged"),document.body.appendChild(t),l=n.pageX-n.target.getBoundingClientRect().left,r=n.pageY-window.scrollY-n.target.getBoundingClientRect().top,t.style.left=`${n.target.getBoundingClientRect().left}px`,t.style.top=`${window.scrollY+n.target.getBoundingClientRect().top}px`,t.style.width=`${n.target.offsetWidth}px`)})),s.addEventListener("mousemove",(n=>{if(n.preventDefault(),!e)return;const s=document.elementFromPoint(n.clientX,n.clientY);s.classList.contains("list__item")?s.closest(".list").insertBefore(e,s):s.closest(".wrapper")&&s.closest(".wrapper").querySelector(".list").appendChild(e),t.style.left=n.pageX-l+"px",t.style.top=n.pageY-r+"px"})),s.addEventListener("mouseup",(l=>{if(!e)return;const r=document.elementFromPoint(l.clientX,l.clientY);r.classList.contains("wrapper")?r.querySelector(".list").appendChild(e):r.classList.contains("list__item")?r.closest(".list").insertBefore(e,r):r.closest(".wrapper")&&r.closest(".wrapper").querySelector(".list").appendChild(e),document.body.removeChild(t),e=null,t=null}))}e();const t=document.querySelector(".wrapper");const l=document.querySelectorAll(".add__btn"),r=document.querySelectorAll(".add__item-btn"),n=document.querySelectorAll(".textarea"),s=document.querySelectorAll(".list"),o=document.querySelectorAll(".cansel__item-btn");let c;function a(){for(let e=0;e<l.length;e++){const t=l[e];t.addEventListener("click",(e=>{t.style.display="none";e.target.closest(".wrapper").querySelector(".form").style.display="block"}))}for(const e of n)e.addEventListener("input",(e=>{c=e.target.value}));for(let e=0;e<r.length;e++){r[e].addEventListener("click",(t=>{const l=document.createElement("div");l.classList.add("list__item"),l.textContent=c,s[e].append(l),l.addEventListener("mouseover",(function(e){e.currentTarget.classList.add("active"),e.currentTarget.querySelector(".newItemDelete").classList.add("visible")})),l.addEventListener("mouseout",(function(e){e.currentTarget.classList.remove("active"),e.currentTarget.querySelector(".newItemDelete").classList.remove("visible")}));const r=document.createElement("button");r.className="newItemDelete",r.textContent="X",l.appendChild(r),r.addEventListener("click",(function(e){e.preventDefault(),e.target.closest(".newItem"),l.remove()}));t.target.closest(".wrapper").querySelector(".textarea").value="",c="";t.target.closest(".wrapper").querySelector(".form").style.display="none";t.target.closest(".wrapper").querySelector(".add__btn").style.display="flex"}))}for(let e=0;e<o.length;e++){o[e].addEventListener("click",(e=>{e.target.closest(".wrapper").querySelector(".textarea").value="",c="";e.target.closest(".wrapper").querySelector(".form").style.display="none";e.target.closest(".wrapper").querySelector(".add__btn").style.display="flex"}))}}a(),e(),setInterval((()=>{!function(){const e=[],l=Array.from(t.querySelectorAll(".list__item"));l&&l.forEach((t=>{e.push(t.textContent)})),localStorage.setItem("cards",JSON.stringify({listItems:e}))}()}),1e3),function(){let e;try{e=JSON.parse(localStorage.getItem("cards")),e.listItems&&e.listItems.forEach((e=>{a()}))}catch(e){throw new Error("Invalid cards")}}()})();